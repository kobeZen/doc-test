import{_ as n,c as a,a as e,o as t}from"./app-CZ9vYtNn.js";const p={};function o(l,s){return t(),a("div",null,s[0]||(s[0]=[e(`<h1 id="change-log" tabindex="-1"><a class="header-anchor" href="#change-log"><span>Change Log</span></a></h1><p>2025-03-25: update <code>Business Type (CHAIN_DEPOSIT, FIAT_DEPOSIT, TRADE, FEE, FIAT_WITHDRAWAL, CHAIN_WITHDRAWAL, CONVERT, DISTRIBUTION, P2P_TRANSFER, SPOT_TO_CREDIT, CREDIT_TO_SPOT, VIRTUAL_DISTRIBUTE, OTHERS)</code> to Balance Update endpoint</p><p>2024-10-16: add <code>account email</code> and <code>busienss serial number</code> to Balance Update endpoint, add <code>account email</code> to Account Update endpoint.</p><p>2024-07-29: add <code>Business Type</code> to Balance Update endpoint</p><p>2023-07-15: update <code>balanceUpdate</code> trigger condition</p><p>2022-08-19: add weight infomation for all interfaces</p><h1 id="user-data-streams-for-coins-2022-08-19" tabindex="-1"><a class="header-anchor" href="#user-data-streams-for-coins-2022-08-19"><span>User Data Streams for Coins (2022-08-19)</span></a></h1><h2 id="general-wss-information" tabindex="-1"><a class="header-anchor" href="#general-wss-information"><span>General WSS information</span></a></h2><ul><li>The base endpoint is: <strong>https://api.pro.coins.ph</strong></li><li>A User Data Stream <code>listenKey</code> is valid for 60 minutes after creation.</li><li>Doing a <code>PUT</code> on a <code>listenKey</code> will extend its validity for 60 minutes.</li><li>Doing a <code>DELETE</code> on a <code>listenKey</code> will close the stream and invalidate the listenKey.</li><li>Doing a <code>POST</code> on an account with an active <code>listenKey</code> will return the currently active <code>listenKey</code> and extend its validity for 60 minutes.</li><li>The base websocket endpoint is: <strong>wss://wsapi.pro.coins.ph</strong></li><li>User Data Streams are accessed at <strong>/openapi/ws/&lt;listenKey&gt;</strong></li><li>A single connection to api endpoint is only valid for 24 hours; expect to be disconnected at the 24 hour mark</li></ul><h2 id="api-endpoints" tabindex="-1"><a class="header-anchor" href="#api-endpoints"><span>API Endpoints</span></a></h2><h3 id="create-a-listenkey" tabindex="-1"><a class="header-anchor" href="#create-a-listenkey"><span>Create a listenKey</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line">POST /openapi/v1/userDataStream</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Start a new user data stream. The stream will close after 60 minutes unless a keepalive is sent.that listenKey will be returned and its validity will be extended for 60 minutes.</p><p><strong>Weight:</strong> 1</p><p><strong>Parameters:</strong></p><p>None</p><p><strong>Response:</strong></p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token string-property property">&quot;listenKey&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1A9LWJjuMwKWYP4QQPw34GRm8gz3x5AephXSuqcDef1RnzoBVhEeGE963CoS1Sgj&quot;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ping-keep-alive-a-listenkey" tabindex="-1"><a class="header-anchor" href="#ping-keep-alive-a-listenkey"><span>Ping/Keep-alive a listenKey</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line">PUT /openapi/v1/userDataStream</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Keepalive a user data stream to prevent a time out. User data streams will close after 60 minutes. It&#39;s recommended to send a ping about every 30 minutes.</p><p><strong>Weight:</strong> 1</p><p><strong>Parameters:</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Mandatory</th><th>Description</th></tr></thead><tbody><tr><td>listenKey</td><td>STRING</td><td>YES</td><td></td></tr></tbody></table><p><strong>Response:</strong></p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="close-a-listenkey" tabindex="-1"><a class="header-anchor" href="#close-a-listenkey"><span>Close a listenKey</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line">DELETE /openapi/v1/userDataStream</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Close out a user data stream.</p><p><strong>Weight:</strong> 1</p><p><strong>Parameters:</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Mandatory</th><th>Description</th></tr></thead><tbody><tr><td>listenKey</td><td>STRING</td><td>YES</td><td></td></tr></tbody></table><p><strong>Response:</strong></p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="web-socket-payloads" tabindex="-1"><a class="header-anchor" href="#web-socket-payloads"><span>Web Socket Payloads</span></a></h2><h3 id="account-update" tabindex="-1"><a class="header-anchor" href="#account-update"><span>Account Update</span></a></h3><p><code>outboundAccountPosition</code> is sent any time an account balance has changed and contains the assets that were possibly changed by the event that generated the balance change.</p><p><strong>Payload:</strong> balance snapshot</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token string-property property">&quot;e&quot;</span><span class="token operator">:</span> <span class="token string">&quot;outboundAccountPosition&quot;</span><span class="token punctuation">,</span> <span class="token comment">// Event Type</span></span>
<span class="line">  <span class="token string-property property">&quot;E&quot;</span><span class="token operator">:</span> <span class="token number">1564034571105</span><span class="token punctuation">,</span>             <span class="token comment">// Event Time</span></span>
<span class="line">  <span class="token string-property property">&quot;u&quot;</span><span class="token operator">:</span> <span class="token number">1564034571073</span><span class="token punctuation">,</span>             <span class="token comment">// Account Last Update time</span></span>
<span class="line">  <span class="token string-property property">&quot;B&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>                          <span class="token comment">// Balance</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">      <span class="token string-property property">&quot;a&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ETH&quot;</span><span class="token punctuation">,</span>                 <span class="token comment">// Asset</span></span>
<span class="line">      <span class="token string-property property">&quot;f&quot;</span><span class="token operator">:</span> <span class="token string">&quot;10000.000000&quot;</span><span class="token punctuation">,</span>        <span class="token comment">// Free</span></span>
<span class="line">      <span class="token string-property property">&quot;l&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0.000000&quot;</span>             <span class="token comment">// Locked</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token string-property property">&quot;em&quot;</span><span class="token operator">:</span> <span class="token string">&quot;test@coins.ph&quot;</span>          <span class="token comment">// Account email,This parameter will only be provided when the master account is whitelisted and there has been a balance change on the sub-account.</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="balance-update" tabindex="-1"><a class="header-anchor" href="#balance-update"><span>Balance Update</span></a></h3><p><code>balanceUpdate</code> is pushed upon non trading fund activities - transfer / deposit / withdrawal</p><p><strong>Payload:</strong> contains balance changed</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token string-property property">&quot;e&quot;</span><span class="token operator">:</span> <span class="token string">&quot;balanceUpdate&quot;</span><span class="token punctuation">,</span>         <span class="token comment">// Event Type</span></span>
<span class="line">  <span class="token string-property property">&quot;E&quot;</span><span class="token operator">:</span> <span class="token number">1573200697110</span><span class="token punctuation">,</span>           <span class="token comment">// Event Time</span></span>
<span class="line">  <span class="token string-property property">&quot;a&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ETH&quot;</span><span class="token punctuation">,</span>                   <span class="token comment">// Asset</span></span>
<span class="line">  <span class="token string-property property">&quot;d&quot;</span><span class="token operator">:</span> <span class="token string">&quot;100.00000000&quot;</span><span class="token punctuation">,</span>          <span class="token comment">// Balance Delta</span></span>
<span class="line">  <span class="token string-property property">&quot;T&quot;</span><span class="token operator">:</span> <span class="token number">1573200697068</span><span class="token punctuation">,</span>           <span class="token comment">// Clear Time</span></span>
<span class="line">  <span class="token string-property property">&quot;BS&quot;</span><span class="token operator">:</span> <span class="token string">&quot;CHAIN_DEPOSIT&quot;</span><span class="token punctuation">,</span>        <span class="token comment">// Business Type (CHAIN_DEPOSIT, FIAT_DEPOSIT, TRADE, FEE, FIAT_WITHDRAWAL, CHAIN_WITHDRAWAL, CONVERT, DISTRIBUTION, P2P_TRANSFER, SPOT_TO_CREDIT, CREDIT_TO_SPOT, VIRTUAL_DISTRIBUTE, OTHERS)</span></span>
<span class="line">  <span class="token string-property property">&quot;em&quot;</span><span class="token operator">:</span> <span class="token string">&quot;test@coins.ph&quot;</span><span class="token punctuation">,</span>        <span class="token comment">// Account email,This parameter will only be provided when the master account is whitelisted and there has been a balance change on the sub-account.</span></span>
<span class="line">  <span class="token string-property property">&quot;BI&quot;</span><span class="token operator">:</span> <span class="token string">&quot;123456789&quot;</span>             <span class="token comment">// Business serial number,This parameter will only be provided when the master account is whitelisted and there has been a balance change on the sub-account.</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="order-update" tabindex="-1"><a class="header-anchor" href="#order-update"><span>Order Update</span></a></h3><p>Orders are updated with the <code>executionReport</code> event. Check the API documentation and below for relevant enum definitions. Average price can be found by doing <code>Z</code> divided by <code>z</code>.</p><p><strong>Payload:</strong></p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token string-property property">&quot;e&quot;</span><span class="token operator">:</span> <span class="token string">&quot;executionReport&quot;</span><span class="token punctuation">,</span>        <span class="token comment">// Event type</span></span>
<span class="line">  <span class="token string-property property">&quot;E&quot;</span><span class="token operator">:</span> <span class="token number">1499405658658</span><span class="token punctuation">,</span>            <span class="token comment">// Event time</span></span>
<span class="line">  <span class="token string-property property">&quot;s&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ETHBTC&quot;</span><span class="token punctuation">,</span>                 <span class="token comment">// Symbol</span></span>
<span class="line">  <span class="token string-property property">&quot;c&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1000087761&quot;</span><span class="token punctuation">,</span>             <span class="token comment">// Client order ID</span></span>
<span class="line">  <span class="token string-property property">&quot;S&quot;</span><span class="token operator">:</span> <span class="token string">&quot;BUY&quot;</span><span class="token punctuation">,</span>                    <span class="token comment">// Side</span></span>
<span class="line">  <span class="token string-property property">&quot;o&quot;</span><span class="token operator">:</span> <span class="token string">&quot;LIMIT&quot;</span><span class="token punctuation">,</span>                  <span class="token comment">// Order type</span></span>
<span class="line">  <span class="token string-property property">&quot;f&quot;</span><span class="token operator">:</span> <span class="token string">&quot;GTC&quot;</span><span class="token punctuation">,</span>                    <span class="token comment">// Time in force</span></span>
<span class="line">  <span class="token string-property property">&quot;q&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.00000000&quot;</span><span class="token punctuation">,</span>             <span class="token comment">// Order quantity</span></span>
<span class="line">  <span class="token string-property property">&quot;p&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0.10264410&quot;</span><span class="token punctuation">,</span>             <span class="token comment">// Order price</span></span>
<span class="line">  <span class="token string-property property">&quot;P&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0.00000000&quot;</span><span class="token punctuation">,</span>             <span class="token comment">// Stop price</span></span>
<span class="line">  <span class="token string-property property">&quot;x&quot;</span><span class="token operator">:</span> <span class="token string">&quot;NEW&quot;</span><span class="token punctuation">,</span>                    <span class="token comment">// Current execution type</span></span>
<span class="line">  <span class="token string-property property">&quot;X&quot;</span><span class="token operator">:</span> <span class="token string">&quot;NEW&quot;</span><span class="token punctuation">,</span>                    <span class="token comment">// Current order status</span></span>
<span class="line">  <span class="token string-property property">&quot;r&quot;</span><span class="token operator">:</span> <span class="token string">&quot;NONE&quot;</span><span class="token punctuation">,</span>                   <span class="token comment">// Order reject reason</span></span>
<span class="line">  <span class="token string-property property">&quot;i&quot;</span><span class="token operator">:</span> <span class="token number">1241518645726809840</span><span class="token punctuation">,</span>      <span class="token comment">// Order ID</span></span>
<span class="line">  <span class="token string-property property">&quot;l&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0.00000000&quot;</span><span class="token punctuation">,</span>             <span class="token comment">// Last executed quantity</span></span>
<span class="line">  <span class="token string-property property">&quot;z&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0.00000000&quot;</span><span class="token punctuation">,</span>             <span class="token comment">// Cumulative filled quantity</span></span>
<span class="line">  <span class="token string-property property">&quot;L&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0.00000000&quot;</span><span class="token punctuation">,</span>             <span class="token comment">// Last executed price</span></span>
<span class="line">  <span class="token string-property property">&quot;n&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>                      <span class="token comment">// Commission amount</span></span>
<span class="line">  <span class="token string-property property">&quot;N&quot;</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>                     <span class="token comment">// Commission asset</span></span>
<span class="line">  <span class="token string-property property">&quot;T&quot;</span><span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>                       <span class="token comment">// Transaction time</span></span>
<span class="line">  <span class="token string-property property">&quot;t&quot;</span><span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>                    	 <span class="token comment">// Trade ID</span></span>
<span class="line">  <span class="token string-property property">&quot;w&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>                     <span class="token comment">// Is the order on the book?</span></span>
<span class="line">  <span class="token string-property property">&quot;m&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>                    <span class="token comment">// Is this trade the maker side?</span></span>
<span class="line">  <span class="token string-property property">&quot;O&quot;</span><span class="token operator">:</span> <span class="token number">1499405658657</span><span class="token punctuation">,</span>            <span class="token comment">// Order creation time</span></span>
<span class="line">  <span class="token string-property property">&quot;Z&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0.00000000&quot;</span>              <span class="token comment">// Cumulative quote asset transacted quantity</span></span>
<span class="line">  <span class="token string-property property">&quot;Y&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0.00000000&quot;</span><span class="token punctuation">,</span>             <span class="token comment">// Last quote asset transacted quantity (i.e. lastPrice * lastQty)</span></span>
<span class="line">  <span class="token string-property property">&quot;Q&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0.00000000&quot;</span>              <span class="token comment">// Quote Order Qty</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Execution types:</strong></p><ul><li>NEW - The order has been accepted into the engine.</li><li>CANCELED - The order has been canceled by the user.</li><li>REJECTED - The order has been rejected and was not processed.</li><li>TRADE - Part of the order or all of the order&#39;s quantity has filled.</li><li>EXPIRED - The order was canceled according to the order type&#39;s rules (e.g. LIMIT FOK orders with no fill, LIMIT IOC or MARKET orders that partially fill) or by the exchange.</li></ul>`,49)]))}const i=n(p,[["render",o]]),c=JSON.parse('{"path":"/user-data-stream.html","title":"User-Data-Stream","lang":"en-US","frontmatter":{"title":"User-Data-Stream"},"headers":[{"level":1,"title":"Change Log","slug":"change-log","link":"#change-log","children":[]},{"level":1,"title":"User Data Streams for Coins (2022-08-19)","slug":"user-data-streams-for-coins-2022-08-19","link":"#user-data-streams-for-coins-2022-08-19","children":[{"level":2,"title":"General WSS information","slug":"general-wss-information","link":"#general-wss-information","children":[]},{"level":2,"title":"API Endpoints","slug":"api-endpoints","link":"#api-endpoints","children":[{"level":3,"title":"Create a listenKey","slug":"create-a-listenkey","link":"#create-a-listenkey","children":[]},{"level":3,"title":"Ping/Keep-alive a listenKey","slug":"ping-keep-alive-a-listenkey","link":"#ping-keep-alive-a-listenkey","children":[]},{"level":3,"title":"Close a listenKey","slug":"close-a-listenkey","link":"#close-a-listenkey","children":[]}]},{"level":2,"title":"Web Socket Payloads","slug":"web-socket-payloads","link":"#web-socket-payloads","children":[{"level":3,"title":"Account Update","slug":"account-update","link":"#account-update","children":[]},{"level":3,"title":"Balance Update","slug":"balance-update","link":"#balance-update","children":[]},{"level":3,"title":"Order Update","slug":"order-update","link":"#order-update","children":[]}]}]}],"git":{"updatedTime":1748507313000,"contributors":[{"name":"kobe-zeng","username":"kobe-zeng","email":"kobe@coins.ph","commits":1,"url":"https://github.com/kobe-zeng"}],"changelog":[{"hash":"a5365910670a9fab42def81b254c84d33f780a41","time":1748507313000,"email":"kobe@coins.ph","author":"kobe-zeng","message":"init"}]},"filePathRelative":"user-data-stream.md"}');export{i as comp,c as data};
